{{ if .Site.Params.techstack.enable | default false }}
<link rel="stylesheet" href="{{ "css/techstack.css" | relURL }}">

<section id="techstack" class="techstack-section py-5">
  {{ with .Site.GetPage "techstack" }}
  <div class="container">
    <div class="section-header text-center">
      <h3>{{ .Params.title }}</h3>
      {{ with .Params.intro }}
        <p>{{ . }}</p>
      {{ end }}
    </div>

    <div class="techstack-grid">
      {{ range .Params.technical_groups }}
      <div class="techstack-card" data-aos="fade-up">
        <h5 class="techstack-title">{{ .title }}</h5>

        <div class="techstack-icons">
        {{ range .skills }}
          {{ $hasIcon := false }}
          <div class="techstack-icon">
            {{ if .devicon_name }}
              {{ $hasIcon = true }}
              <img
                src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/{{ .devicon_name }}/{{ .devicon_name }}-{{ with .devicon_suffix }}{{ . }}{{ else }}original{{ end }}.svg"
                alt="{{ .name }}"
                width="56"
                height="56"
                loading="lazy"
                data-animation="skill-icon"
              />
            {{ else if .simpleicon_name }}
              {{ if .simpleicon_color }}
                <div class="tech-icon" style="--icon-color: {{ .simpleicon_color | default "" }}">
                  {{ $icon := resources.Get (printf "icons/simple/%s.svg" .simpleicon_name) }}
                  {{ if $icon }}
                    {{ $hasIcon = true }}
                    {{ $icon.Content | safeHTML }}
                  {{ end }}
                </div>
              {{ else if .simpleicon_cdn }}
                {{ $hasIcon = true }}
                <img
                  src="https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/{{ .simpleicon_name }}.svg"
                  alt="{{ .name }}"
                  width="56"
                  height="56"
                  loading="lazy"
                  data-animation="skill-icon"
                />
              {{ else }}
                {{ $icon := resources.Get (printf "icons/simple/%s.svg" .simpleicon_name) }}
                {{ if $icon }}
                  {{ $hasIcon = true }}
                  {{ $icon.Content | safeHTML }}
                {{ end }}
              {{ end }}
            {{ else if .svgporn_name }}
              {{ $hasIcon = true }}
              <img
                src="https://cdn.svglogos.dev/logos/{{ .svgporn_name }}.svg"
                alt="{{ .name }}"
                width="56"
                height="56"
                loading="lazy"
                data-animation="skill-icon"
              />
            {{ else if .custom_icon }}
              {{ $icon := resources.Get (printf "icons/simple/%s.svg" .custom_icon) }}
              {{ if $icon }}
                {{ $hasIcon = true }}
                {{ $icon.Content | safeHTML }}
              {{ end }}
            {{ end }}
            {{ if $hasIcon }}
              <span>{{ .name }}</span>
            {{ end }}
          </div>
        {{ end }}
        </div>
      </div>
      {{ end }}
    </div>
  </div>
  {{ end }}
</section>
{{ end }}